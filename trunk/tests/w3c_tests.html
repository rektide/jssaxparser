<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head>
    <title>w3c Tests</title>
    <script type="text/javascript" src="../jsunit/app/jsUnitCore.js"></script>
    <script type="text/javascript" src="../jssaxparser/AttributesImpl.js"></script>
    <script type="text/javascript" src="../jssaxparser/sax.js"></script>
    <script type="text/javascript" src="../jssaxparser/dom_content_handler.js"></script>
    <script type="text/javascript" src="../examples/xml_samples.js"></script>
    <script type="text/javascript" src="manageWhiteSpace.js"></script>
    <script type="text/javascript" src="dom_utils.js"></script>
    <script type="text/javascript" src="jsxmlunit.js"></script>
    <script type="text/javascript" src="applyXslt.js"></script>
    <script type="text/javascript">
    /*global assertTrue, assertXmlEquals, createDocumentFromText, DomContentHandler, SAXParser, loadFile, loadXml, loadXml2, loadXml3, loadRelaxng, loadRelaxng2,loadRelaxng3, JsUnitException */
	// (Note: change reference to SAXParser above if change name)
    var contentHandler;
    var saxParser;
    
    function setUp() {
        contentHandler = new DomContentHandler();
		saxParser = new SAXParser(contentHandler, contentHandler, contentHandler, contentHandler, contentHandler);
    }
    
    function parse(xml) {
        try {
            saxParser.parseString(xml);
        } catch(e) {
            assertTrue(e.message, false);
        }
        assertTrue(contentHandler.saxParseExceptions.length + " SAX exception(s) has(have) been thrown",
		contentHandler.saxParseExceptions.length === 0);
        assertXmlEquals(createDocumentFromText(xml), contentHandler.document);
    }

    
    function testParse_w3ctestSuite() {
        var fileAsText = loadFile("xmlconf/xmlconf.xml");
        parse(fileAsText);
    }
	
	function runAllTests () {
        setUp();
		testParse_w3ctestSuite();
        alert('done!');
	}
	
	// Brett added to be able to show something in console when error is thrown
	JsUnitException.prototype.toString = function () {
		return this.jsUnitMessage;
	};
	
	
	runAllTests(); 
    </script>
  </head>
  <body>
    This is a Test Page for sax.js
  </body>
</html>
